// 国际化语言包模块
const i18n = {
    zh: {
        "brand": "DevTools",
        "current-tool": "当前工具:",
        "data-formatting": "数据格式化",
        "datetime-tools": "时间日期",
        "encoding-tools": "编码转换",
        "dev-tools": "开发工具",
        "crypto-tools": "加解密工具",
        "json-formatter": "JSON格式化",
        "xml-formatter": "XML格式化",
        "timestamp-converter": "时间戳转换",
        "base64-encoder": "Base64编码",
        "url-encoder": "URL编码",
        "regex-tester": "正则表达式",
        "uuid-generator": "UUID生成器",
        "hash-generator": "哈希计算",
        "text-encrypt": "文本加密",
        "json-desc": "格式化、校验和转换JSON数据",
        "xml-desc": "格式化和校验XML数据",
        "timestamp-desc": "Unix时间戳与标准时间相互转换",
        "base64-desc": "Base64编码/解码，支持文本和文件，实时转换",
        "url-desc": "URL编码/解码，支持参数格式化和Base64 URL安全编码",
        "regex-desc": "实时测试正则表达式，高亮显示匹配结果，支持常用正则库",
        "uuid-desc": "生成UUID v4，支持批量生成和自定义格式",
        "hash-desc": "支持MD5、SHA系列哈希算法，HMAC计算，文件哈希",
        "encrypt-desc": "支持AES、DES加密解密，Base64编码输出",
        "input-json": "输入JSON",
        "input-xml": "输入XML",
        "output-result": "输出结果",
        "format": "格式化",
        "minify": "压缩",
        "validate": "校验",
        "copy-result": "复制结果",
        "clear": "清空",
        "current-timestamp-sec": "当前时间戳(秒):",
        "current-timestamp-ms": "当前时间戳(毫秒):",
        "refresh-timestamp": "刷新当前时间戳",
        "datetime": "日期时间",
        "conversion-result": "转换结果:",
        "timestamp-to-date": "时间戳 -> 日期",
        "date-to-timestamp": "日期 -> 时间戳",
        "processing": "处理中...",
        "operation-success": "操作成功",
        "no-content-to-copy": "没有可复制的内容",
        "copy-success": "复制成功",
        "copy-failed": "复制失败，请手动复制",
        "json-empty": "JSON为空",
        "xml-empty": "XML为空",
        "invalid-timestamp": "无效的时间戳",
        "invalid-date": "无效的日期",
        "json-format-error": "JSON格式错误",
        "json-format-success": "JSON格式化成功",
        "json-minify-error": "JSON压缩错误",
        "json-minify-success": "JSON压缩成功",
        "json-valid": "JSON格式有效",
        "json-validate-success": "JSON验证通过",
        "json-validate-error": "JSON验证失败",
        "content-cleared": "内容已清空",
        "xml-format-error": "XML格式化错误",
        "xml-format-success": "XML格式化成功",
        "xml-minify-error": "XML压缩错误",
        "xml-minify-success": "XML压缩成功",
        "xml-valid": "XML格式有效",
        "xml-validate-success": "XML验证通过",
        "history": "历史记录",
        "history-hint": "仅保留最近10条记录",
        "no-history": "暂无历史记录",
        "xml-validate-error": "XML验证失败",
        "please-enter-content": "请输入需要处理的内容",
        "please-enter-timestamp": "请输入时间戳",
        "timestamp-convert-error": "时间戳转换失败",
        "timestamp-convert-success": "时间戳转换成功",
        "local-time": "本地时间",
        "utc-time": "UTC时间",
        "iso-format": "ISO格式",
        "please-select-datetime": "请选择日期时间",
        "date-convert-error": "日期转换失败",
        "date-convert-success": "日期转换成功",
        "timestamp-sec": "时间戳(秒)",
        "timestamp-ms": "时间戳(毫秒)",
        "timestamp-refreshed": "时间戳已刷新",
        "current-time": "当前时间",
        "conversion-results": "转换结果",
        "copy-all": "复制全部",
        "relative-time": "相对时间",
        "quick-now": "当前时间",
        "quick-today-start": "今日0点",
        "quick-today-end": "今日24点",
        "quick-tomorrow-start": "明日0点",
        "array-length": "数组长度:",
        "base64-encoder": "Base64编码",
        "url-encoder": "URL编码",
        "regex-tester": "正则表达式",
        "uuid-generator": "UUID生成器",
        "hash-generator": "哈希计算",
        "text-encrypt": "文本加密",
        "encode": "编码",
        "decode": "解码",
        "text-input": "文本输入",
        "file-input": "文件输入",
        "input-text": "输入文本",
        "output-text": "输出结果",
        "copy": "复制",
        "clear": "清空",
        "options": "选项",
        "select-file": "选择文件",
        "drag-file-hint": "拖拽文件到此处或点击选择",
        "select-file-btn": "选择文件",
        "url-safe-mode": "URL安全模式",
        "no-line-wrap": "不换行",
        "auto-detect": "自动检测",
        "swap-input-output": "交换输入输出",
        "encode-full": "完全编码",
        "space-as-plus": "空格转为+",
        "base64-url-encoding": "Base64 URL编码",
        "format-params": "格式化参数",
        "format-options": "格式化选项",
        "json-format": "JSON格式",
        "table-format": "表格格式",
        "query-format": "查询字符串",
        "quick-examples": "快速示例",
        "regex-pattern": "正则表达式",
        "enter-regex-hint": "请输入正则表达式",
        "regex-flags": "标志 (Flags)",
        "flag-global": "全局",
        "flag-ignore": "忽略大小写",
        "flag-multiline": "多行",
        "flag-dotall": "单行",
        "flag-unicode": "Unicode",
        "flag-sticky": "粘性",
        "test-text": "测试文本",
        "load-example": "加载示例",
        "match-results": "匹配结果",
        "matches": "个匹配",
        "highlighted-text": "高亮显示",
        "match-details": "匹配详情",
        "common-regex": "常用正则表达式",
        "test-regex": "测试正则",
        "copy-regex": "复制正则",
        "clear-all": "清空全部",
        "uuid-version": "UUID版本",
        "generate-count": "生成数量",
        "format-options": "格式选项",
        "letter-case": "大小写",
        "lowercase": "小写",
        "uppercase": "大写",
        "generate-uuid": "生成UUID",
        "generate-results": "生成结果",
        "uuid-generated": "个UUID已生成",
        "statistics": "统计信息",
        "total-generated": "总生成数:",
        "last-generated": "最后生成:",
        "duplicate-check": "重复检查:",
        "no-duplicates": "无重复",
        "batch-operations": "批量操作",
        "export-json": "导出JSON",
        "export-csv": "导出CSV",
        "export-text": "导出文本",
        "usage-tips": "使用说明",
        "hash-algorithms": "哈希算法",
        "hmac-options": "HMAC选项",
        "enable-hmac": "启用HMAC",
        "hmac-key": "HMAC密钥",
        "key-format": "密钥格式",
        "text-format": "文本",
        "hex-format": "十六进制",
        "base64-format": "Base64",
        "output-options": "输出选项",
        "hex-output": "十六进制",
        "base64-output": "Base64",
        "base64-url-output": "Base64 URL",
        "uppercase-output": "大写输出",
        "calculate-hash": "计算哈希",
        "hash-results": "计算结果",
        "calculation-time": "计算时间:",
        "compare-hash": "对比哈希",
        "hex-input": "十六进制",
        "hash-comparison": "哈希对比",
        "hash-to-compare": "要对比的哈希值",
        "compare": "对比",
        "encryption-algorithm": "加密算法",
        "key-size": "密钥长度",
        "mode": "模式",
        "padding": "填充方式",
        "key-settings": "密钥设置",
        "encryption-key": "加密密钥",
        "key-strength": "密钥强度:",
        "initialization-vector": "初始化向量 (IV)",
        "output-encoding": "输出编码",
        "base64-encoding": "Base64编码",
        "hex-encoding": "十六进制编码",
        "string-output": "字符串输出",
        "quick-actions": "快速操作",
        "encrypt": "加密",
        "decrypt": "解密",
        "encryption-info": "加密信息",
        "algorithm-used": "使用算法:",
        "key-size-used": "密钥长度:",
        "mode-used": "加密模式:",
        "processing-time": "处理时间:",
        "please-select-file": "请选择文件"
    },
    en: {
        "brand": "DevTools",
        "current-tool": "Current tool:",
        "data-formatting": "Data Formatting",
        "datetime-tools": "DateTime",
        "encoding-tools": "Encoding",
        "dev-tools": "Dev Tools",
        "crypto-tools": "Crypto",
        "json-formatter": "JSON Formatter",
        "xml-formatter": "XML Formatter",
        "timestamp-converter": "Timestamp Converter",
        "json-desc": "Format, validate and convert JSON data",
        "xml-desc": "Format and validate XML data",
        "timestamp-desc": "Convert between Unix timestamp and standard time",
        "base64-desc": "Base64 encode/decode, support text and files, real-time conversion",
        "url-desc": "URL encode/decode, support parameter formatting and Base64 URL-safe encoding",
        "regex-desc": "Real-time regex testing with highlighted matches and common regex library",
        "uuid-desc": "Generate UUID v4, support batch generation and custom formats",
        "hash-desc": "Support MD5, SHA series hash algorithms, HMAC calculation, file hashing",
        "encrypt-desc": "Support AES, DES encryption/decryption with Base64 encoded output",
        "input-json": "Input JSON",
        "input-xml": "Input XML",
        "output-result": "Output Result",
        "format": "Format",
        "minify": "Minify",
        "validate": "Validate",
        "copy-result": "Copy Result",
        "clear": "Clear",
        "current-timestamp-sec": "Current Timestamp (sec):",
        "current-timestamp-ms": "Current Timestamp (ms):",
        "refresh-timestamp": "Refresh Current Timestamp",
        "datetime": "Date Time",
        "conversion-result": "Conversion Result:",
        "timestamp-to-date": "Timestamp -> Date",
        "date-to-timestamp": "Date -> Timestamp",
        "processing": "Processing...",
        "operation-success": "Operation successful",
        "no-content-to-copy": "No content to copy",
        "copy-success": "Copy successful",
        "copy-failed": "Copy failed, please copy manually",
        "json-empty": "JSON is empty",
        "xml-empty": "XML is empty",
        "invalid-timestamp": "Invalid timestamp",
        "invalid-date": "Invalid date",
        "json-format-error": "JSON formatting error",
        "json-format-success": "JSON formatted successfully",
        "json-minify-error": "JSON minify error",
        "json-minify-success": "JSON minified successfully",
        "json-valid": "JSON is valid",
        "json-validate-success": "JSON validation passed",
        "json-validate-error": "JSON validation failed",
        "content-cleared": "Content cleared",
        "xml-format-error": "XML formatting error",
        "xml-format-success": "XML formatted successfully",
        "xml-minify-error": "XML minify error",
        "xml-minify-success": "XML minified successfully",
        "xml-valid": "XML is valid",
        "xml-validate-success": "XML validation passed",
        "history": "History",
        "history-hint": "Only keep the latest 10 records",
        "no-history": "No history available",
        "xml-validate-error": "XML validation failed",
        "please-enter-content": "Please enter content to process",
        "please-enter-timestamp": "Please enter timestamp",
        "timestamp-convert-error": "Timestamp conversion failed",
        "timestamp-convert-success": "Timestamp conversion successful",
        "local-time": "Local time",
        "utc-time": "UTC time",
        "iso-format": "ISO format",
        "please-select-datetime": "Please select date and time",
        "date-convert-error": "Date conversion failed",
        "date-convert-success": "Date conversion successful",
        "timestamp-sec": "Timestamp (sec)",
        "timestamp-ms": "Timestamp (ms)",
        "timestamp-refreshed": "Timestamp refreshed",
        "current-time": "Current time",
        "conversion-results": "Conversion results",
        "copy-all": "Copy all",
        "relative-time": "Relative time",
        "quick-now": "Current time",
        "quick-today-start": "Today 00:00",
        "quick-today-end": "Today 24:00",
        "quick-tomorrow-start": "Tomorrow 00:00",
        "array-length": "Array length:",
        "base64-encoder": "Base64 Encoder",
        "url-encoder": "URL Encoder",
        "regex-tester": "Regex Tester",
        "uuid-generator": "UUID Generator",
        "hash-generator": "Hash Generator",
        "text-encrypt": "Text Encrypt",
        "encode": "Encode",
        "decode": "Decode",
        "text-input": "Text Input",
        "file-input": "File Input",
        "input-text": "Input Text",
        "output-text": "Output Result",
        "copy": "Copy",
        "clear": "Clear",
        "options": "Options",
        "select-file": "Select File",
        "drag-file-hint": "Drag files here or click to select",
        "select-file-btn": "Select File",
        "url-safe-mode": "URL Safe Mode",
        "no-line-wrap": "No Line Wrap",
        "auto-detect": "Auto Detect",
        "swap-input-output": "Swap Input/Output",
        "encode-full": "Full Encode",
        "space-as-plus": "Space as +",
        "base64-url-encoding": "Base64 URL Encoding",
        "format-params": "Format Parameters",
        "format-options": "Format Options",
        "json-format": "JSON Format",
        "table-format": "Table Format",
        "query-format": "Query String",
        "quick-examples": "Quick Examples",
        "regex-pattern": "Regex Pattern",
        "enter-regex-hint": "Please enter regex pattern",
        "regex-flags": "Flags",
        "flag-global": "Global",
        "flag-ignore": "Ignore Case",
        "flag-multiline": "Multiline",
        "flag-dotall": "Dotall",
        "flag-unicode": "Unicode",
        "flag-sticky": "Sticky",
        "test-text": "Test Text",
        "load-example": "Load Example",
        "match-results": "Match Results",
        "matches": "matches",
        "highlighted-text": "Highlighted Text",
        "match-details": "Match Details",
        "common-regex": "Common Regex",
        "test-regex": "Test Regex",
        "copy-regex": "Copy Regex",
        "clear-all": "Clear All",
        "uuid-version": "UUID Version",
        "generate-count": "Generate Count",
        "format-options": "Format Options",
        "letter-case": "Letter Case",
        "lowercase": "Lowercase",
        "uppercase": "Uppercase",
        "generate-uuid": "Generate UUID",
        "generate-results": "Generate Results",
        "uuid-generated": "UUIDs generated",
        "statistics": "Statistics",
        "total-generated": "Total Generated:",
        "last-generated": "Last Generated:",
        "duplicate-check": "Duplicate Check:",
        "no-duplicates": "No Duplicates",
        "batch-operations": "Batch Operations",
        "export-json": "Export JSON",
        "export-csv": "Export CSV",
        "export-text": "Export Text",
        "usage-tips": "Usage Tips",
        "hash-algorithms": "Hash Algorithms",
        "hmac-options": "HMAC Options",
        "enable-hmac": "Enable HMAC",
        "hmac-key": "HMAC Key",
        "key-format": "Key Format",
        "text-format": "Text",
        "hex-format": "Hex",
        "base64-format": "Base64",
        "output-options": "Output Options",
        "hex-output": "Hex Output",
        "base64-output": "Base64 Output",
        "base64-url-output": "Base64 URL Output",
        "uppercase-output": "Uppercase Output",
        "calculate-hash": "Calculate Hash",
        "hash-results": "Hash Results",
        "calculation-time": "Calculation Time:",
        "compare-hash": "Compare Hash",
        "hex-input": "Hex Input",
        "hash-comparison": "Hash Comparison",
        "hash-to-compare": "Hash to Compare",
        "compare": "Compare",
        "encryption-algorithm": "Encryption Algorithm",
        "key-size": "Key Size",
        "mode": "Mode",
        "padding": "Padding",
        "key-settings": "Key Settings",
        "encryption-key": "Encryption Key",
        "key-strength": "Key Strength:",
        "initialization-vector": "Initialization Vector (IV)",
        "output-encoding": "Output Encoding",
        "base64-encoding": "Base64 Encoding",
        "hex-encoding": "Hex Encoding",
        "string-output": "String Output",
        "quick-actions": "Quick Actions",
        "encrypt": "Encrypt",
        "decrypt": "Decrypt",
        "encryption-info": "Encryption Info",
        "algorithm-used": "Algorithm Used:",
        "key-size-used": "Key Size Used:",
        "mode-used": "Encryption Mode:",
        "processing-time": "Processing Time:",
        "please-select-file": "Please select file"
    }
};

// 语言管理模块
const LanguageManager = {
    currentLang: 'zh',
    
    changeLanguage(lang) {
        if (!i18n[lang]) return;
        
        this.currentLang = lang;
        $('[data-i18n]').each(function() {
            const key = $(this).attr('data-i18n');
            if (i18n[lang][key]) {
                $(this).text(i18n[lang][key]);
            }
        });
        
        // 更新按钮状态
        $('#lang-zh').removeClass('bg-primary text-white bg-gray-200 text-gray-700');
        $('#lang-en').removeClass('bg-primary text-white bg-gray-200 text-gray-700');
        
        $('#lang-zh').addClass(lang === 'zh' ? 'bg-primary text-white' : 'bg-gray-200 text-gray-700');
        $('#lang-en').addClass(lang === 'en' ? 'bg-primary text-white' : 'bg-gray-200 text-gray-700');
        
        // 刷新当前工具的结果显示
        const $activeNavItem = $('.nav-item-active');
        if ($activeNavItem.length) {
            const category = $activeNavItem.attr('data-category');
            if (category === 'json' && $('#json-output-text').text()) {
                $('#json-format').click();
            } else if (category === 'xml' && $('#xml-output-text').text()) {
                $('#xml-format').click();
            }
        }
    },
    
    getText(key) {
        return i18n[this.currentLang][key] || key;
    }
};