<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å®Œæ•´åŠŸèƒ½æµ‹è¯•</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/common.css">
    <style>
        /* è‡ªå®šä¹‰é¢œè‰²å˜é‡ */
        :root {
            --primary: #3B82F6;
            --secondary: #10B981;
            --dark: #1E293B;
            --light: #F8FAFC;
            --accent: #8B5CF6;
            --danger: #EF4444;
            --warning: #F59E0B;
        }

        body {
            font-family: Inter, system-ui, sans-serif;
            background-color: #f9fafb;
            color: #1f2937;
            margin: 0;
            padding: 0;
            height: 100vh;
            overflow: hidden;
        }

        /* ä¸»å®¹å™¨ */
        .main-container {
            display: flex;
            width: 100%;
            height: 100vh;
        }

        /* æµ‹è¯•ä¿¡æ¯é¢æ¿ */
        .test-panel {
            position: fixed;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 15px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 12px;
            z-index: 1000;
            max-width: 350px;
            max-height: 400px;
            overflow-y: auto;
        }

        .test-panel h3 {
            margin: 0 0 10px 0;
            color: #3B82F6;
        }

        .test-item {
            margin-bottom: 5px;
            padding: 2px 0;
        }

        .test-item.success {
            color: #10B981;
        }

        .test-item.error {
            color: #EF4444;
        }

        .test-item.warning {
            color: #F59E0B;
        }
    </style>
</head>
<body>
    <div class="test-panel">
        <h3>ğŸ”§ ç³»ç»Ÿè¯Šæ–­</h3>
        <div id="test-results">
            <div class="test-item">ç­‰å¾…åˆå§‹åŒ–...</div>
        </div>
    </div>

    <!-- ä¸»å®¹å™¨ -->
    <div class="main-container">
        <!-- ä¾§è¾¹æ  -->
        <aside id="sidebar" class="sidebar">
            <div style="padding: 1.25rem; border-bottom: 1px solid #e5e7eb;">
                <div style="display: flex; align-items: center; gap: 0.5rem;">
                    <div style="background: linear-gradient(135deg, var(--primary), var(--accent)); color: white; padding: 0.5rem; border-radius: 0.5rem;">
                        <i class="fa fa-wrench" style="font-size: 1.25rem;"></i>
                    </div>
                    <h1 style="font-size: 1.25rem; font-weight: 700; color: var(--dark);">DevToolBox</h1>
                </div>
            </div>

            <nav style="padding: 1rem;">
                <div style="display: flex; flex-direction: column; gap: 0.25rem;">
                    <!-- æ•°æ®æ ¼å¼åŒ– -->
                    <div style="margin-bottom: 0.5rem;">
                        <p style="font-size: 0.75rem; text-transform: uppercase; color: #6b7280; font-weight: 600; letter-spacing: 0.05em; margin-bottom: 0.5rem; padding-left: 0.75rem;">æ•°æ®æ ¼å¼åŒ–</p>
                        <a href="#json-formatter" class="nav-item active" data-category="json">
                            <i class="fa fa-code" style="margin-right: 0.75rem; width: 1.25rem; text-align: center;"></i>
                            <span>JSONæ ¼å¼åŒ–</span>
                        </a>
                        <a href="#xml-formatter" class="nav-item" data-category="xml">
                            <i class="fa fa-file-code-o" style="margin-right: 0.75rem; width: 1.25rem; text-align: center;"></i>
                            <span>XMLæ ¼å¼åŒ–</span>
                        </a>
                    </div>

                    <!-- æ—¶é—´æ—¥æœŸ -->
                    <div style="margin-bottom: 0.5rem;">
                        <p style="font-size: 0.75rem; text-transform: uppercase; color: #6b7280; font-weight: 600; letter-spacing: 0.05em; margin-bottom: 0.5rem; padding-left: 0.75rem;">æ—¶é—´æ—¥æœŸ</p>
                        <a href="#timestamp-converter" class="nav-item" data-category="timestamp">
                            <i class="fa fa-clock-o" style="margin-right: 0.75rem; width: 1.25rem; text-align: center;"></i>
                            <span>æ—¶é—´æˆ³è½¬æ¢</span>
                        </a>
                    </div>

                    <!-- ç¼–ç è½¬æ¢ -->
                    <div style="margin-bottom: 0.5rem;">
                        <p style="font-size: 0.75rem; text-transform: uppercase; color: #6b7280; font-weight: 600; letter-spacing: 0.05em; margin-bottom: 0.5rem; padding-left: 0.75rem;">ç¼–ç è½¬æ¢</p>
                        <a href="#base64-encoder" class="nav-item" data-category="base64">
                            <i class="fa fa-exchange" style="margin-right: 0.75rem; width: 1.25rem; text-align: center;"></i>
                            <span>Base64ç¼–ç </span>
                        </a>
                        <a href="#url-encoder" class="nav-item" data-category="url">
                            <i class="fa fa-link" style="margin-right: 0.75rem; width: 1.25rem; text-align: center;"></i>
                            <span>URLç¼–ç </span>
                        </a>
                    </div>
                </div>
            </nav>
        </aside>

        <!-- ä¸»å†…å®¹åŒºåŸŸ -->
        <main class="main-content">
            <!-- å¤´éƒ¨ -->
            <header class="header">
                <div class="header-content">
                    <div style="display: flex; align-items: center;">
                        <button id="toggle-sidebar" style="display: none; margin-right: 1rem; color: #4b5563; cursor: pointer;" class="mobile-only">
                            <i class="fa fa-bars" style="font-size: 1.25rem;"></i>
                        </button>
                        <div style="display: flex; align-items: center; gap: 0.5rem;" class="mobile-only">
                            <div style="background: linear-gradient(135deg, var(--primary), var(--accent)); color: white; padding: 0.25rem; border-radius: 0.25rem;">
                                <i class="fa fa-wrench"></i>
                            </div>
                            <h1 style="font-size: 1.125rem; font-weight: 700; color: var(--dark);">DevToolBox</h1>
                        </div>
                        <div style="display: flex; align-items: center; gap: 0.25rem;" class="desktop-only">
                            <span style="font-size: 0.875rem; color: #6b7280;">å½“å‰å·¥å…·:</span>
                            <span id="current-tool-name" style="font-size: 0.875rem; font-weight: 500;">JSONæ ¼å¼åŒ–</span>
                        </div>
                    </div>
                </div>
            </header>

            <!-- å†…å®¹åŒºåŸŸ -->
            <div class="content-area">
                <div style="max-width: 1200px; margin: 0 auto;">
                    <!-- JSONå·¥å…· -->
                    <div id="json" class="tool-section" style="display: block;">
                        <div class="tool-header">
                            <h2 style="font-size: 1.25rem; font-weight: 700; display: flex; align-items: center;">
                                <i class="fa fa-code" style="color: var(--primary); margin-right: 0.5rem;"></i>
                                <span>JSONæ ¼å¼åŒ–å·¥å…·</span>
                            </h2>
                            <p style="color: #6b7280; font-size: 0.875rem; margin-top: 0.25rem;">æ ¼å¼åŒ–ã€æ ¡éªŒå’Œè½¬æ¢JSONæ•°æ®</p>
                        </div>
                        <div class="tool-content">
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem;">
                                <div>
                                    <label style="display: block; font-size: 0.875rem; font-weight: 500; color: #374151; margin-bottom: 0.5rem;">è¾“å…¥JSON</label>
                                    <textarea id="json-input" class="form-textarea" placeholder="è¯·è¾“å…¥JSONæ•°æ®...">{"name":"DevTools","type":"utility","features":["json","base64","timestamp"]}</textarea>
                                </div>
                                <div>
                                    <label style="display: flex; align-items: center; justify-content: space-between; font-size: 0.875rem; font-weight: 500; color: #374151; margin-bottom: 0.5rem;">
                                        <span>æ ¼å¼åŒ–ç»“æœ</span>
                                        <button id="json-copy" class="btn-outline">
                                            <i class="fa fa-copy"></i> å¤åˆ¶
                                        </button>
                                    </label>
                                    <div id="json-output" style="width: 100%; height: 200px; padding: 1rem; border: 1px solid #d1d5db; border-radius: 0.5rem; background-color: #f9fafb; font-family: monospace; font-size: 0.875rem; overflow-y: auto;"></div>
                                </div>
                            </div>
                            <div style="margin-top: 1rem; display: flex; gap: 0.75rem;">
                                <button id="json-format" class="btn-primary">
                                    <i class="fa fa-magic"></i> æ ¼å¼åŒ–
                                </button>
                                <button id="json-minify" class="btn-secondary">
                                    <i class="fa fa-compress"></i> å‹ç¼©
                                </button>
                                <button id="json-validate" class="btn-outline">
                                    <i class="fa fa-check"></i> æ ¡éªŒ
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- XMLå·¥å…· -->
                    <div id="xml" class="tool-section" style="display: none;">
                        <div class="tool-header">
                            <h2 style="font-size: 1.25rem; font-weight: 700; display: flex; align-items: center;">
                                <i class="fa fa-file-code-o" style="color: var(--primary); margin-right: 0.5rem;"></i>
                                <span>XMLæ ¼å¼åŒ–å·¥å…·</span>
                            </h2>
                            <p style="color: #6b7280; font-size: 0.875rem; margin-top: 0.25rem;">æ ¼å¼åŒ–å’Œæ ¡éªŒXMLæ•°æ®</p>
                        </div>
                        <div class="tool-content">
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem;">
                                <div>
                                    <label style="display: block; font-size: 0.875rem; font-weight: 500; color: #374151; margin-bottom: 0.5rem;">è¾“å…¥XML</label>
                                    <textarea id="xml-input" class="form-textarea" placeholder="è¯·è¾“å…¥XMLæ•°æ®..."><root><item id="1"><name>æµ‹è¯•</name><value>ç¤ºä¾‹</value></item></root></textarea>
                                </div>
                                <div>
                                    <label style="display: flex; align-items: center; justify-content: space-between; font-size: 0.875rem; font-weight: 500; color: #374151; margin-bottom: 0.5rem;">
                                        <span>æ ¼å¼åŒ–ç»“æœ</span>
                                        <button id="xml-copy" class="btn-outline">
                                            <i class="fa fa-copy"></i> å¤åˆ¶
                                        </button>
                                    </label>
                                    <div id="xml-output" style="width: 100%; height: 200px; padding: 1rem; border: 1px solid #d1d5db; border-radius: 0.5rem; background-color: #f9fafb; font-family: monospace; font-size: 0.875rem; overflow-y: auto;"></div>
                                </div>
                            </div>
                            <div style="margin-top: 1rem; display: flex; gap: 0.75rem;">
                                <button id="xml-format" class="btn-primary">
                                    <i class="fa fa-magic"></i> æ ¼å¼åŒ–
                                </button>
                                <button id="xml-minify" class="btn-secondary">
                                    <i class="fa fa-compress"></i> å‹ç¼©
                                </button>
                                <button id="xml-validate" class="btn-outline">
                                    <i class="fa fa-check"></i> æ ¡éªŒ
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- æ—¶é—´æˆ³å·¥å…· -->
                    <div id="timestamp" class="tool-section" style="display: none;">
                        <div class="tool-header">
                            <h2 style="font-size: 1.25rem; font-weight: 700; display: flex; align-items: center;">
                                <i class="fa fa-clock-o" style="color: var(--primary); margin-right: 0.5rem;"></i>
                                <span>æ—¶é—´æˆ³è½¬æ¢å·¥å…·</span>
                            </h2>
                            <p style="color: #6b7280; font-size: 0.875rem; margin-top: 0.25rem;">æ—¶é—´æˆ³ä¸æ—¥æœŸæ—¶é—´ç›¸äº’è½¬æ¢</p>
                        </div>
                        <div class="tool-content">
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem;">
                                <div>
                                    <label style="display: block; font-size: 0.875rem; font-weight: 500; color: #374151; margin-bottom: 0.5rem;">æ—¶é—´æˆ³</label>
                                    <input type="number" id="timestamp-input" class="form-input" placeholder="è¾“å…¥æ—¶é—´æˆ³...">
                                </div>
                                <div>
                                    <label style="display: block; font-size: 0.875rem; font-weight: 500; color: #374151; margin-bottom: 0.5rem;">æ—¥æœŸæ—¶é—´</label>
                                    <input type="datetime-local" id="datetime-input" class="form-input">
                                </div>
                            </div>
                            <div style="margin-top: 1rem; display: flex; gap: 0.75rem; flex-wrap: wrap;">
                                <button id="timestamp-to-datetime" class="btn-primary">
                                    <i class="fa fa-arrow-right"></i> è½¬æ¢ä¸ºæ—¥æœŸ
                                </button>
                                <button id="datetime-to-timestamp" class="btn-primary">
                                    <i class="fa fa-arrow-left"></i> è½¬æ¢ä¸ºæ—¶é—´æˆ³
                                </button>
                                <button id="current-timestamp" class="btn-secondary">
                                    <i class="fa fa-clock"></i> å½“å‰æ—¶é—´æˆ³
                                </button>
                            </div>
                            <div style="margin-top: 1.5rem; padding: 1rem; background-color: #f9fafb; border-radius: 0.5rem;">
                                <h3 style="font-size: 0.875rem; font-weight: 600; color: #374151; margin-bottom: 0.75rem;">å¸¸ç”¨æ—¶é—´æˆ³</h3>
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 0.5rem;">
                                    <button class="quick-timestamp-btn" data-timestamp="">å½“å‰æ—¶é—´</button>
                                    <button class="quick-timestamp-btn" data-timestamp="0">1970-01-01</button>
                                    <button class="quick-timestamp-btn" data-timestamp="86400">1970-01-02</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Base64å·¥å…· -->
                    <div id="base64" class="tool-section" style="display: none;">
                        <div class="tool-header">
                            <h2 style="font-size: 1.25rem; font-weight: 700; display: flex; align-items: center;">
                                <i class="fa fa-exchange" style="color: var(--primary); margin-right: 0.5rem;"></i>
                                <span>Base64ç¼–ç å·¥å…·</span>
                            </h2>
                            <p style="color: #6b7280; font-size: 0.875rem; margin-top: 0.25rem;">Base64ç¼–ç /è§£ç ï¼Œæ”¯æŒæ–‡æœ¬å’Œæ–‡ä»¶</p>
                        </div>
                        <div class="tool-content">
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem;">
                                <div>
                                    <label style="display: block; font-size: 0.875rem; font-weight: 500; color: #374151; margin-bottom: 0.5rem;">è¾“å…¥æ–‡æœ¬</label>
                                    <textarea id="base64-input" class="form-textarea" placeholder="è¯·è¾“å…¥è¦ç¼–ç çš„æ–‡æœ¬...">Hello World!</textarea>
                                    <div style="margin-top: 0.5rem; font-size: 0.75rem; color: #6b7280;">
                                        <span class="char-count">0</span> å­—ç¬¦ | <span class="text-bytes">0</span> å­—èŠ‚
                                    </div>
                                </div>
                                <div>
                                    <label style="display: flex; align-items: center; justify-content: space-between; font-size: 0.875rem; font-weight: 500; color: #374151; margin-bottom: 0.5rem;">
                                        <span>è¾“å‡ºç»“æœ</span>
                                        <button id="base64-copy" class="btn-outline">
                                            <i class="fa fa-copy"></i> å¤åˆ¶
                                        </button>
                                    </label>
                                    <textarea id="base64-output" class="form-textarea" readonly style="background-color: #f9fafb;"></textarea>
                                    <div style="margin-top: 0.5rem; font-size: 0.75rem; color: #6b7280;">
                                        <span class="output-count">0</span> å­—ç¬¦
                                    </div>
                                </div>
                            </div>
                            <div style="margin-top: 1rem; display: flex; gap: 0.75rem;">
                                <button id="base64-convert" class="btn-primary">
                                    <i class="fa fa-exchange"></i> ç¼–ç 
                                </button>
                                <button id="base64-example" class="btn-secondary">
                                    <i class="fa fa-file-text"></i> åŠ è½½ç¤ºä¾‹
                                </button>
                                <button id="base64-clear" class="btn-outline">
                                    <i class="fa fa-trash"></i> æ¸…ç©º
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- URLå·¥å…· -->
                    <div id="url" class="tool-section" style="display: none;">
                        <div class="tool-header">
                            <h2 style="font-size: 1.25rem; font-weight: 700; display: flex; align-items: center;">
                                <i class="fa fa-link" style="color: var(--primary); margin-right: 0.5rem;"></i>
                                <span>URLç¼–ç å·¥å…·</span>
                            </h2>
                            <p style="color: #6b7280; font-size: 0.875rem; margin-top: 0.25rem;">URLç¼–ç /è§£ç ï¼Œæ”¯æŒå‚æ•°è§£æ</p>
                        </div>
                        <div class="tool-content">
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem;">
                                <div>
                                    <label style="display: block; font-size: 0.875rem; font-weight: 500; color: #374151; margin-bottom: 0.5rem;">è¾“å…¥URL</label>
                                    <textarea id="url-input" class="form-textarea" placeholder="è¯·è¾“å…¥URL...">https://example.com/search?q=æµ‹è¯•</textarea>
                                </div>
                                <div>
                                    <label style="display: flex; align-items: center; justify-content: space-between; font-size: 0.875rem; font-weight: 500; color: #374151; margin-bottom: 0.5rem;">
                                        <span>ç¼–ç ç»“æœ</span>
                                        <button id="url-copy" class="btn-outline">
                                            <i class="fa fa-copy"></i> å¤åˆ¶
                                        </button>
                                    </label>
                                    <textarea id="url-output" class="form-textarea" readonly style="background-color: #f9fafb;"></textarea>
                                </div>
                            </div>
                            <div style="margin-top: 1rem; display: flex; gap: 0.75rem;">
                                <button id="url-encode" class="btn-primary">
                                    <i class="fa fa-lock"></i> ç¼–ç 
                                </button>
                                <button id="url-decode" class="btn-secondary">
                                    <i class="fa fa-unlock"></i> è§£ç 
                                </button>
                                <button id="url-example" class="btn-outline">
                                    <i class="fa fa-file-text"></i> åŠ è½½ç¤ºä¾‹
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- æµ‹è¯•æ§åˆ¶é¢æ¿ -->
                    <div style="background: white; padding: 1.5rem; border-radius: 0.75rem; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1); margin-top: 2rem;">
                        <h3 style="margin-bottom: 1rem; color: var(--primary);">ğŸ§ª æµ‹è¯•æ§åˆ¶</h3>
                        <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
                            <button onclick="testAllTools()" class="btn-primary">
                                <i class="fa fa-play"></i> æµ‹è¯•æ‰€æœ‰å·¥å…·
                            </button>
                            <button onclick="testNavigation()" class="btn-secondary">
                                <i class="fa fa-random"></i> æµ‹è¯•å¯¼èˆªåˆ‡æ¢
                            </button>
                            <button onclick="testSidebar()" class="btn-outline">
                                <i class="fa fa-bars"></i> æµ‹è¯•ä¾§è¾¹æ 
                            </button>
                            <button onclick="clearResults()" class="btn-outline">
                                <i class="fa fa-trash"></i> æ¸…ç©ºç»“æœ
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // æµ‹è¯•ç»“æœç®¡ç†
        let testResults = [];

        function addTestResult(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const result = { message, type, timestamp };
            testResults.push(result);
            updateTestDisplay();
        }

        function updateTestDisplay() {
            const container = $('#test-results');
            container.empty();

            testResults.slice(-10).forEach(result => {
                const div = $(`<div class="test-item ${result.type}">[${result.timestamp}] ${result.message}</div>`);
                container.append(div);
            });
        }

        // æµ‹è¯•æ‰€æœ‰å·¥å…·
        function testAllTools() {
            addTestResult('å¼€å§‹æµ‹è¯•æ‰€æœ‰å·¥å…·...', 'info');

            // æµ‹è¯•å·¥å…·æ˜¾ç¤º/éšè—
            const tools = ['json', 'xml', 'timestamp', 'base64', 'url'];
            tools.forEach(tool => {
                $(`.nav-item[data-category="${tool}"]`).click();
                const isVisible = $(`#${tool}`).css('display') === 'block';
                addTestResult(`${tool} å·¥å…·æ˜¾ç¤º: ${isVisible ? 'âœ“' : 'âœ—'}`, isVisible ? 'success' : 'error');
            });

            // å›åˆ°JSONå·¥å…·
            $('.nav-item[data-category="json"]').click();
            addTestResult('å·¥å…·æµ‹è¯•å®Œæˆ', 'success');
        }

        // æµ‹è¯•å¯¼èˆªåˆ‡æ¢
        function testNavigation() {
            addTestResult('å¼€å§‹æµ‹è¯•å¯¼èˆªåˆ‡æ¢...', 'info');

            const items = $('.nav-item');
            items.each((index, item) => {
                $(item).click();
                const toolName = $(item).find('span').text();
                const currentToolName = $('#current-tool-name').text();
                const isActive = $(item).hasClass('active');

                addTestResult(`åˆ‡æ¢åˆ° ${toolName}: ${isActive ? 'âœ“' : 'âœ—'} | å¤´éƒ¨æ˜¾ç¤º: ${currentToolName}`, isActive ? 'success' : 'error');
            });

            addTestResult('å¯¼èˆªæµ‹è¯•å®Œæˆ', 'success');
        }

        // æµ‹è¯•ä¾§è¾¹æ 
        function testSidebar() {
            addTestResult('å¼€å§‹æµ‹è¯•ä¾§è¾¹æ ...', 'info');

            const sidebar = $('#sidebar');
            const isOpen = sidebar.hasClass('open');

            $('#toggle-sidebar').click();
            setTimeout(() => {
                const newIsOpen = sidebar.hasClass('open');
                addTestResult(`ä¾§è¾¹æ åˆ‡æ¢: ${isOpen} â†’ ${newIsOpen}`, newIsOpen !== isOpen ? 'success' : 'error');

                $('#toggle-sidebar').click();
                setTimeout(() => {
                    const finalIsOpen = sidebar.hasClass('open');
                    addTestResult(`ä¾§è¾¹æ è¿˜åŸ: ${newIsOpen} â†’ ${finalIsOpen}`, finalIsOpen === false ? 'success' : 'error');
                    addTestResult('ä¾§è¾¹æ æµ‹è¯•å®Œæˆ', 'success');
                }, 300);
            }, 300);
        }

        // æ¸…ç©ºç»“æœ
        function clearResults() {
            testResults = [];
            addTestResult('æµ‹è¯•ç»“æœå·²æ¸…ç©º', 'info');
        }

        // ç®€å•çš„å·¥å…·åŠŸèƒ½æ¨¡æ‹Ÿ
        function initToolFunctions() {
            // JSONå·¥å…·
            $('#json-format').click(() => {
                try {
                    const input = $('#json-input').val();
                    const parsed = JSON.parse(input);
                    const formatted = JSON.stringify(parsed, null, 2);
                    $('#json-output').html('<pre>' + formatted + '</pre>');
                    addTestResult('JSONæ ¼å¼åŒ–æˆåŠŸ', 'success');
                } catch (e) {
                    $('#json-output').html('<div style="color: red;">JSONæ ¼å¼é”™è¯¯: ' + e.message + '</div>');
                    addTestResult('JSONæ ¼å¼åŒ–å¤±è´¥', 'error');
                }
            });

            // Base64å·¥å…·
            $('#base64-convert').click(() => {
                const input = $('#base64-input').val();
                const encoded = btoa(unescape(encodeURIComponent(input)));
                $('#base64-output').val(encoded);
                addTestResult('Base64ç¼–ç æˆåŠŸ', 'success');
            });

            // URLå·¥å…·
            $('#url-encode').click(() => {
                const input = $('#url-input').val();
                const encoded = encodeURIComponent(input);
                $('#url-output').val(encoded);
                addTestResult('URLç¼–ç æˆåŠŸ', 'success');
            });

            // ç¤ºä¾‹æŒ‰é’®
            $('#base64-example').click(() => {
                $('#base64-input').val('Hello, World! ä½ å¥½ä¸–ç•Œï¼');
                addTestResult('Base64ç¤ºä¾‹åŠ è½½æˆåŠŸ', 'success');
            });

            $('#url-example').click(() => {
                $('#url-input').val('https://example.com/search?q=æµ‹è¯•&category=tech');
                addTestResult('URLç¤ºä¾‹åŠ è½½æˆåŠŸ', 'success');
            });

            // å¤åˆ¶åŠŸèƒ½
            $('.btn-outline').each((i, btn) => {
                if ($(btn).text().includes('å¤åˆ¶')) {
                    $(btn).click(() => {
                        const targetId = $(btn).attr('id').replace('-copy', '-output');
                        const text = $(`#${targetId}`).val() || $(`#${targetId}`).text();
                        navigator.clipboard.writeText(text).then(() => {
                            addTestResult('å¤åˆ¶æˆåŠŸ', 'success');
                        });
                    });
                }
            });
        }

        // åˆå§‹åŒ–
        $(document).ready(function() {
            addTestResult('é¡µé¢åˆå§‹åŒ–å¼€å§‹...', 'info');

            // æ£€æŸ¥ä¾èµ–
            if (typeof $ !== 'undefined') {
                addTestResult('jQuery åŠ è½½æˆåŠŸ', 'success');
            } else {
                addTestResult('jQuery åŠ è½½å¤±è´¥', 'error');
            }

            // å¯¼èˆªç‚¹å‡»äº‹ä»¶
            $('.nav-item').click(function(e) {
                e.preventDefault();

                // ç§»é™¤æ‰€æœ‰å¯¼èˆªé¡¹çš„æ´»è·ƒçŠ¶æ€
                $('.nav-item').removeClass('active nav-item-active');

                // æ·»åŠ å½“å‰å¯¼èˆªé¡¹çš„æ´»è·ƒçŠ¶æ€
                $(this).addClass('active nav-item-active');

                // è·å–å·¥å…·ç±»åˆ«
                const category = $(this).attr('data-category');
                const toolTitle = $(this).find('span').text();

                // æ›´æ–°å½“å‰å·¥å…·åç§°
                $('#current-tool-name').text(toolTitle);

                // éšè—æ‰€æœ‰å·¥å…·ï¼Œæ˜¾ç¤ºå½“å‰å·¥å…·
                $('.tool-section').css('display', 'none');
                $(`#${category}`).css('display', 'block');

                addTestResult(`åˆ‡æ¢åˆ°å·¥å…·: ${toolTitle}`, 'success');

                // åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šç‚¹å‡»å¯¼èˆªåå…³é—­ä¾§è¾¹æ 
                if ($(window).width() < 768) {
                    $('#sidebar').removeClass('open');
                }
            });

            // ä¾§è¾¹æ åˆ‡æ¢
            $('#toggle-sidebar').click(function() {
                $('#sidebar').toggleClass('open');
                addTestResult(`ä¾§è¾¹æ åˆ‡æ¢: ${$('#sidebar').hasClass('open') ? 'æ‰“å¼€' : 'å…³é—­'}`, 'info');
            });

            // å“åº”å¼å¤„ç†
            $(window).resize(function() {
                const width = $(window).width();
                if (width > 767) {
                    $('#sidebar').removeClass('open');
                }
            });

            // åˆå§‹åŒ–å·¥å…·åŠŸèƒ½
            initToolFunctions();

            addTestResult('é¡µé¢åˆå§‹åŒ–å®Œæˆ', 'success');
            addTestResult('é»˜è®¤æ˜¾ç¤ºJSONå·¥å…·', 'success');

            // è‡ªåŠ¨æµ‹è¯•
            setTimeout(() => {
                addTestResult('å¼€å§‹è‡ªåŠ¨æµ‹è¯•...', 'info');
                testNavigation();
            }, 1000);
        });
    </script>
</body>
</html>